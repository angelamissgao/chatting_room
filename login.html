<!DOCTYPE html>
<html>
    <head>
    	<link type="text/css" rel="stylesheet" href="/static/style.css">
        <title>CMU chatting room</title>

    <!--bootstramp import-->
          <meta charset="utf-8">
          <meta name="viewport" content="width=device-width, initial-scale=1">
          <link rel="stylesheet" href="/static/bootstrap-3.3.5-dist/css/bootstrap.min.css">
          <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.3/jquery.min.js"></script>
        <!--  <script src="http://maxcdn.bootstrapcdn.com/bootstrap/3.3.5/js/bootstrap.min.js"></script> -->


    </head>
    <body>
        
        <!-- This is the Header-->
        <div id="header" >
            <h1>Beeper Calmels</h1>
            <img id="header_img" class="img " src="/static/images/u2.png">
            <p>Find Your Colleagues with Our Online Chatting Tool</P>
            
        </div>

            <ul class="nav nav-pills">
                <li><a href="http://localhost:3000">
                    <span class="glyphicon glyphicon-home" aria-hidden="true"></span>
                    <span class="glyphicon-class">Home</span>
                </a></li>
                <li><a href="http://localhost:3000/signup">
                    <span class="glyphicon glyphicon-user" aria-hidden="true"></span>
                    <span class="glyphicon-class">Sign Up</span>
                </a></li>
            </ul>

        <div class="container">
            <h2>Log in to Chatting Room</h2>

            <form class="form-horizontal" role="form" method="post">
                <!-- This is the username and password-->
                <div class="form-group">
                    <label class="control-label col-sm-2" >User Name:</label>
                    <div class="col-sm-10">
                        <input type="text" class="form-control" id="username" placeholder="Calmels" name="username">
                    </div>
                </div>

                <div class="form-group">
                  <label class="control-label col-sm-2" for="password">Password:</label>
                  <div class="col-sm-10">          
                    <input type="password" class="form-control" id="password" placeholder="Enter password" name="password">
                  </div>
                </div>

            <!-- <div class="form-group">        
              <div class="col-sm-offset-2 col-sm-10">
                <div class="checkbox">
                  <label for="remember"><input type="checkbox" name="remember" id="remember"> Remember me</label>
                </div>
              </div>
            </div>
 -->    
            <!-- This is the signin button-->
            <div class="form-group">        
                <div class="col-sm-offset-2 col-sm-10">
                <button type="submit" class="btn btn-default" id="signin" value="Log In" onclick='return false'>Sign in</button>
                <!-- <button type="submit" class="btn btn-default" id="signup" value="sign up" onclick="return false">Sign Up</button> -->
                <br>
                <a href="http://localhost:3000/signup" id="signup">Sign up here!</a>
                </div>
            </div>


            </form>
        </div>    
    	
    	<!-- this is the footer-->
        <div id="footer">
        <img id="footer_img" class="img" src="/static/images/u10.png">
        <p>Copyright @ Angela Gao</p>
        </div>


        <!-- this is cookie settings-->
        <script src="http://code.jquery.com/jquery-1.11.1.js"></script>
        <script src="/static/jquery.cookie.js"> </script>
        <script>
        // if ($('#remember').attr('checked')) {
        //     var username = $('#username').attr("value");
        //     var password = $('#password').attr("value");
        //     // set cookies to expire in 14 days
        //     $.cookie('username', username, { expires: 14 });
        //     $.cookie('password', password, { expires: 14 });
        //     $.cookie('remember', true, { expires: 14 });
        //     } else {
        //     // reset cookies
        //     $.cookie('username', null);
        //     $.cookie('password', null);
        //     $.cookie('remember', null);
        // }

        //     var remember = $.cookie('remember');
        //     if ( remember == 'true' ) {
        //         var username = $.cookie('username');
        //         var password = $.cookie('password');
        //         // autofill the fields
        //         $('#username').attr("value", username);
        //         $('#password').attr("value", password);
        //     }


            //Signin function
            $(document).ready(function() {
            $('#signin').click(function() {

                $.ajax({
                    type: "POST",
                    url: '/signin',
                    data: {
                        username: $("#username").val(),
                        password: $("#password").val()
                    },
                    success: function(data)
                    {
                        alert(data);
                        if (data === 'yes') {
                          $.cookie('username', $("#username").val(), { expires: 14 });
                          $.cookie('password', $("#password").val(), { expires: 14 });
                          
                          //console.log(data.username);
                          window.location.replace('/chat');
                        }
                        else {
                            alert('wrong info');
                        }
                    }
                });
            });
            });

            //Signup function
            $(document).ready(function() {
            $('#signup').click(function() {

                $.ajax({
                    type: "GET",
                    url: '/signup',
                    success: function(data)
                    {
                        window.location.replace('/signup');
                    }  
                });
            });
            });

        </script>
    
    </body>
</html>